# ZarishSync Environment Configuration
# Offline Synchronization Engine for humanitarian healthcare

# Server Configuration
NODE_ENV=development
PORT=3006
LOG_LEVEL=info

# Database Configuration
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=zarish_sync
DATABASE_USER=zarish_sync_user
DATABASE_PASSWORD=secure_password_here
DATABASE_SSL=false
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=20

# CouchDB Configuration (for offline sync)
COUCHDB_HOST=localhost
COUCHDB_PORT=5984
COUCHDB_USERNAME=zarish_sync_user
COUCHDB_PASSWORD=sync_password_here
COUCHDB_DATABASE_PREFIX=zarish_
COUCHDB_SSL=false
COUCHDB_REPLICATION_ENABLED=true

# Redis Configuration (for sync queues and locks)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=6
REDIS_KEY_PREFIX=zarish:sync:

# Security Configuration
JWT_SECRET=your_jwt_secret_key_here_change_in_production
JWT_EXPIRES_IN=24h
ENCRYPTION_KEY=your_32_char_encryption_key_here
SYNC_TOKEN_SECRET=your_sync_token_secret_here

# CORS Configuration
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001,http://localhost:4200

# Synchronization Configuration
SYNC_ENABLED=true
SYNC_CONCURRENCY=5                      # Maximum concurrent sync sessions
SYNC_BATCH_SIZE=100                     # Records per sync batch
SYNC_INTERVAL=300                       # Default sync interval in seconds
SYNC_RETRY_ATTEMPTS=3
SYNC_RETRY_DELAY=5                      # seconds between retries
SYNC_TIMEOUT=300                        # Sync operation timeout in seconds

# Conflict Resolution
CONFLICT_RESOLUTION_STRATEGY=manual     # auto, manual, latest_wins, merge
AUTO_RESOLUTION_ENABLED=true
CONFLICT_NOTIFICATION_ENABLED=true
CONFLICT_RETENTION_DAYS=30

# Network and Bandwidth Management
NETWORK_MONITORING_ENABLED=true
BANDWIDTH_OPTIMIZATION=true
COMPRESSION_ENABLED=true
COMPRESSION_LEVEL=6                     # 1-9, higher = better compression, slower
ADAPTIVE_SYNC_ENABLED=true              # Adjust sync based on network conditions
LOW_BANDWIDTH_THRESHOLD=1               # Mbps threshold for low bandwidth mode

# Data Sources Configuration
SYNC_PATIENTS=true
SYNC_CLINICAL=true
SYNC_LABORATORY=true
SYNC_OPERATIONS=true
SYNC_ANALYTICS=false                    # Analytics data sync (large datasets)
SYNC_ATTACHMENTS=true                   # File attachments sync
SYNC_MEDIA=false                        # Media files sync (very large)

# Priority-based Synchronization
CRITICAL_DATA_SYNC_INTERVAL=60          # seconds for critical data
NORMAL_DATA_SYNC_INTERVAL=300           # seconds for normal data
LOW_PRIORITY_SYNC_INTERVAL=3600         # seconds for low priority data
BACKGROUND_SYNC_INTERVAL=7200           # seconds for background data

# Offline Queue Management
OFFLINE_QUEUE_ENABLED=true
OFFLINE_QUEUE_MAX_SIZE=10000            # Maximum items in offline queue
OFFLINE_QUEUE_RETENTION_HOURS=72       # Hours to retain offline queue items
OFFLINE_QUEUE_COMPRESSION=true

# Emergency Sync Protocol
EMERGENCY_SYNC_ENABLED=true
EMERGENCY_BYPASS_RATE_LIMITS=true
EMERGENCY_AUTO_CONFLICT_RESOLUTION=true
EMERGENCY_CRITICAL_DATA_ONLY=true
EMERGENCY_NOTIFICATION_CHANNELS=websocket,email,sms

# Multi-tier Replication
DEVICE_TO_FACILITY_SYNC=true
FACILITY_TO_COUNTRY_SYNC=true
COUNTRY_TO_GLOBAL_SYNC=true
PEER_TO_PEER_SYNC=false                 # Enable P2P sync between devices

# Data Validation and Integrity
DATA_VALIDATION_ENABLED=true
CHECKSUM_VALIDATION=true
SCHEMA_VALIDATION=true
DATA_ENCRYPTION_IN_TRANSIT=true
DATA_ENCRYPTION_AT_REST=true

# Performance Optimization
SYNC_QUEUE_PROCESSING_INTERVAL=1000     # milliseconds
SYNC_METRICS_COLLECTION=true
SYNC_PERFORMANCE_MONITORING=true
MEMORY_LIMIT_MB=2048                    # Memory limit for sync operations
DISK_SPACE_THRESHOLD_GB=5               # Minimum free disk space required

# Monitoring and Alerting
SYNC_METRICS_ENABLED=true
SYNC_ALERTS_ENABLED=true
ALERT_ON_SYNC_FAILURE=true
ALERT_ON_CONFLICT_THRESHOLD=10          # Alert when conflicts exceed this number
ALERT_ON_SYNC_DELAY_MINUTES=30         # Alert when sync is delayed beyond this

# External Services
ZARISH_CARE_URL=http://localhost:3001
ZARISH_LABS_URL=http://localhost:3002
ZARISH_OPS_URL=http://localhost:3003
ZARISH_ANALYTICS_URL=http://localhost:3004
ZARISH_ACCESS_URL=http://localhost:3005

# Audit and Logging
SYNC_AUDIT_LOGGING=true
AUDIT_LOG_RETENTION_DAYS=365
SYNC_EVENT_LOGGING=true
PERFORMANCE_LOGGING=true
ERROR_LOGGING=true

# Development and Testing
ENABLE_DEBUG_ROUTES=false
ENABLE_MOCK_DATA=false
SIMULATE_NETWORK_CONDITIONS=false
TEST_DATABASE_NAME=zarish_sync_test
SYNC_TESTING_MODE=false

# Humanitarian Specific
FACILITY_CODE=COX-BAZAR-001             # Facility identifier
RESPONSE_CODE=BGD-REFUGEE-2024          # Response operation code
OFFLINE_MODE_HOURS=72                   # Maximum offline operation hours
FIELD_DEVICE_SYNC=true                  # Enable field device synchronization
MOBILE_SYNC_OPTIMIZATION=true           # Optimize for mobile devices

# Multi-language Support
DEFAULT_LOCALE=en
SUPPORTED_LOCALES=en,bn,ar,my,fr,es     # English, Bengali, Arabic, Myanmar, French, Spanish
TIMEZONE=Asia/Dhaka
SYNC_TIMESTAMP_FORMAT=ISO8601

# Advanced Sync Features
INTELLIGENT_SYNC=true                   # AI-powered sync optimization
PREDICTIVE_SYNC=false                   # Predictive data synchronization
LEARNING_SYNC_PATTERNS=true             # Learn user sync patterns
ADAPTIVE_BATCH_SIZING=true              # Adjust batch sizes based on performance
SMART_CONFLICT_RESOLUTION=true          # ML-based conflict resolution suggestions

# Resource Management
MAX_CONCURRENT_DOWNLOADS=3
MAX_CONCURRENT_UPLOADS=2
MAX_SYNC_SESSION_DURATION_HOURS=6
SYNC_CLEANUP_INTERVAL_HOURS=24
TEMP_FILE_CLEANUP_HOURS=1

# Backup and Recovery
SYNC_BACKUP_ENABLED=true
BACKUP_SYNC_STATE=true
RECOVERY_MODE_ENABLED=true
DISASTER_RECOVERY_SYNC=false

# Integration Features
WEBHOOK_NOTIFICATIONS=false
API_INTEGRATION_ENABLED=true
THIRD_PARTY_SYNC=false
LEGACY_SYSTEM_SYNC=false

# Quality of Service
QOS_ENABLED=true
PRIORITY_QUEUE_ENABLED=true
TRAFFIC_SHAPING=true
BANDWIDTH_ALLOCATION_CRITICAL=60        # % bandwidth for critical data
BANDWIDTH_ALLOCATION_NORMAL=30          # % bandwidth for normal data
BANDWIDTH_ALLOCATION_BACKGROUND=10      # % bandwidth for background data